<!DOCTYPE html>
<html lang="zh">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>üì∏Áõ∏ÂÜåÈõÜ</title>
  <style>
    html,body{
      margin:0;
      padding:0;
      background:transparent;
      overflow:hidden;
    }

    .notion-widget-root{
      font-family:system-ui,-apple-system,Segoe UI,Roboto,"Helvetica Neue",Arial,"Noto Sans",sans-serif;
      display:flex;
      align-items:center;
      justify-content:center;
      background:transparent;
    }

    /* üå≤ Forest frame:
       soft bark brown + moss green + sunlit yellow + off-white highlight */
    .frame{
      position:relative;
      display:grid;
      grid-template-rows:auto 1fr;
      row-gap:8px;

      /* gradient shifted toward light moss / lichen / sun */
      background: radial-gradient(circle at 20% 20%,
        #f8f5e9 0%,      /* off-white / lichen */
        #efe4b9 25%,     /* warm pale yellow */
        #c7d7aa 55%,     /* soft moss green */
        #9baf7a 75%,     /* mid moss */
        #7a6a4a 100%     /* muted bark brown */
      );

      border:8px solid #6b5a3a;        /* warm bark edge */
      border-radius:14px;
      max-width:95vw;
      padding:12px;

      /* softer shadow w/ greenish tint */
      box-shadow:
        0 8px 22px rgba(34,43,23,.35),
        inset 0 0 10px rgba(255,255,255,.4);
      overflow:hidden;
    }

    /* Title in deep forest green */
    .frame-title{
      color:#2f3b1d;               /* dark leaf/evergreen */
      font-size:20px;
      font-weight:700;
      margin:2px 6px;
      letter-spacing:.5px;
      text-align:left;
    }

    .slider{
      position:relative;
      width:min(100vw - 56px,980px);
      height:min(80vh,720px);
      background:#000;
      border-radius:10px;
      overflow:hidden;
      transition:opacity .25s;
    }

    .slide{
      position:absolute;
      inset:0;
      opacity:0;
      display:flex;
      align-items:center;
      justify-content:center;
      transition:opacity .45s ease-in-out;
    }
    .slide.current{opacity:1;}

    .slide img{
      width:100%;
      height:100%;
      object-fit:contain;
      user-select:none;
      -webkit-user-drag:none;
    }

    /* Arrows */
    .nav-btn{
      position:absolute;
      top:50%;
      transform:translateY(-50%);
      width:52px;
      height:52px;
      border-radius:50%;
      border:2px solid #fff;
      background:rgba(0,0,0,.4);
      color:#fff;
      font-size:26px;
      line-height:48px;
      text-align:center;
      cursor:pointer;
      user-select:none;
      transition:background .2s,color .2s,opacity .25s;
      z-index:3;
    }
    .nav-btn:hover{
      background:#fff;
      color:#000;
    }
    #prev{left:14px;}
    #next{right:14px;}

    /* Dots bar (top center) with leafy tone */
    .dots{
      position:absolute;
      top:12px;
      left:50%;
      transform:translateX(-50%);
      display:flex;
      gap:8px;
      background:rgba(47,59,29,.55);                     /* deep forest green w/ alpha */
      border:1px solid rgba(255,255,255,.4);              /* soft light edge */
      border-radius:12px;
      padding:6px 10px;
      z-index:4;
      transition:opacity .25s;
      box-shadow:0 2px 4px rgba(0,0,0,.3);
    }
    .dot{
      width:10px;
      height:10px;
      border-radius:50%;
      background:#dfe8c9;                 /* pale leaf */
      cursor:pointer;
      transition:transform .15s,background .15s;
      box-shadow:0 0 4px rgba(0,0,0,.4);
    }
    .dot.active{
      background:#fffbe0;                 /* sunlit yellow */
      transform:scale(1.25);
      box-shadow:0 0 6px rgba(255,255,200,.8);
    }

    /* Bottom overlay (caption + buttons), restyled for forest theme */
    .overlay{
      position:absolute;
      left:50%;
      bottom:14px;
      transform:translateX(-50%);
      display:grid;
      gap:10px;
      justify-items:center;
      z-index:4;
      width:calc(100% - 32px);
      pointer-events:none;
      transition:opacity .25s;
    }

    /* caption bubble = deep forest glass */
    .caption{
      max-width:90%;
      padding:10px 14px;
      font-size:18px;
      font-weight:700;
      letter-spacing:.2px;
      color:#fffef5; /* warm off-white */
      text-align:center;
      background:rgba(21,32,15,.78); /* deep forest green, translucent */
      border:2px solid rgba(255,255,230,.7); /* pale warm highlight */
      border-radius:12px;
      box-shadow:0 4px 10px rgba(0,0,0,.45);
      pointer-events:auto;
    }

    .center-buttons{
      display:flex;
      gap:10px;
      pointer-events:auto;
    }

    /* Buttons: soft moss pill */
    .ctrl-btn{
      background:linear-gradient(
        180deg,
        #eef3dc 0%,   /* pale moss highlight */
        #d6dfbd 60%,  /* light moss */
        #c4cfa2 100%  /* slightly deeper moss */
      );
      color:#2f3b1d;
      border:1px solid #7a845e;
      border-radius:10px;
      padding:8px 14px;
      font-size:16px;
      font-weight:700;
      min-width:48px;
      text-align:center;
      cursor:pointer;
      box-shadow:
        0 1px 2px rgba(0,0,0,.4),
        0 0 6px rgba(255,255,230,.6) inset;
      transition:background .15s,border-color .15s,transform .05s;
    }
    .ctrl-btn:hover{
      background:linear-gradient(
        180deg,
        #f8ffe6 0%,
        #e8f2cb 60%,
        #dce7b6 100%
      );
      border-color:#55603f;
    }
    .ctrl-btn:active{transform:scale(.98);}

    /* Fullscreen layout */
    .frame:fullscreen,
    .frame:-webkit-full-screen{
      width:100vw;
      height:100vh;
      max-width:100vw;
      max-height:100vh;
      padding:12px;
      border-radius:0;
      grid-template-rows:auto 1fr;
      row-gap:8px;
      overflow:hidden;
    }
    .frame:fullscreen .slider,
    .frame:-webkit-full-screen .slider{
      width:100%;
      height:100%;
      border-radius:10px;
    }
    .frame:fullscreen .dots,
    .frame:-webkit-full-screen .dots{
      top:56px;
    }

    /* Hide UI only if playing AND idle */
    .slider.playing.idle .overlay,
    .slider.playing.idle .nav-btn,
    .slider.playing.idle .dots{
      opacity:0;
      pointer-events:none;
    }

    @media(max-width:768px){
      .slider{width:90vw;height:70vh}
      .caption{font-size:16px}
      .ctrl-btn{font-size:15px}
      .frame-title{font-size:18px}
    }
  </style>
</head>
<body>
  <div class="notion-widget-root">
    <div class="frame" id="frame">
      <!-- You can change this title per trip album -->
      <div class="frame-title">üì∏Ê≠§ÊôØÁÇπÁÖßÁâá~</div>

      <div class="slider" id="slider" aria-live="polite">
        <!-- Replace these with your travel photos -->
        <div class="slide current"><img src="1.jpg" alt="Slide 1" data-caption="‰∏ΩÊ∞¥Êú∫Âú∫"/></div>
        <div class="slide"><img src="2.jpg" alt="Slide 2" data-caption="<Â±±‰∏≠È£ûÈ∏ü>ÈÄ†Âûã"/></div>
        <div class="slide"><img src="3.jpg" alt="Slide 3" data-caption="ÂÄºÊú∫ÊüúÂè∞"/></div>
        <div class="slide"><img src="4.jpg" alt="Slide 4" data-caption="Â∫ÜÂõΩÂ∫ÜËøé‰∏≠Áßã"/></div>
        <div class="slide"><img src="5.jpg" alt="Slide 5" data-caption="ÂõΩÂÜÖÂá∫Âèë"/></div>
        <div class="slide"><img src="6.jpg" alt="Slide 6" data-caption="Âá∫Âè£"/></div>
        <div class="slide"><img src="7.jpg" alt="Slide 7" data-caption="ÈóÆËÆØÂè∞"/></div>
        <div class="slide"><img src="8.jpg" alt="Slide 8" data-caption="È≤úËä±Ëá™Âä©ÂîÆÂçñÊüú"/></div>
        <div class="slide"><img src="9.jpg" alt="Slide 9" data-caption="Â§ßËÄ≥Áãó&ËìùËâ≤ÊúãÂèã‰ª¨^.^"/></div>
        <div class="slide"><img src="10.jpg" alt="Slide 10" data-caption="ÂõΩÂÜÖÂà∞Ëææ"/></div>
        <div class="slide"><img src="11.jpg" alt="Slide 11" data-caption="ÂÆâÊ£ÄÂè£"/></div>
        <div class="slide"><img src="12.jpg" alt="Slide 12" data-caption="ÈùíÁî∞ÂíñÂï°"/></div>
        <div class="slide"><img src="13.jpg" alt="Slide 13" data-caption="ÁôªÊú∫Âè£4&5"/></div>
        <div class="slide"><img src="14.jpg" alt="Slide 14" data-caption="Â∫ß‰Ωç"/></div>
        <div class="slide"><img src="15.jpg" alt="Slide 15" data-caption="Ëé≤ÈÉΩÊñáÊóÖÂπøÂëä‰Ωç"/></div>
        <div class="slide"><img src="16.jpg" alt="Slide 16" data-caption="2FÈóÆËÆØÂè∞(ÂÖ®Êú®ÂÜÖÈ•∞Ôºö)"/></div>
        <div class="slide"><img src="17.jpg" alt="Slide 17" data-caption="ÁôªÊú∫Áâå"/></div>
        <div class="slide"><img src="18.jpg" alt="Slide 18" data-caption="È∫óÊ∞¥"/></div>
        <div class="slide"><img src="19.jpg" alt="Slide 19" data-caption="ÁôªÊú∫~"/></div>
        <!-- arrows -->
        <div id="prev" class="nav-btn" aria-label="‰∏ä‰∏ÄÂº†">‚Üê</div>
        <div id="next" class="nav-btn" aria-label="‰∏ã‰∏ÄÂº†">‚Üí</div>

        <!-- dots -->
        <div class="dots" id="dots"></div>

        <!-- caption + buttons -->
        <div class="overlay">
          <div class="caption" id="caption"></div>
          <div class="center-buttons">
            <button class="ctrl-btn" id="playpause">‚ñ∂Ô∏èÊí≠Êîæ (2s)</button>
            <button class="ctrl-btn" id="fullscreen">üî≤ÂÖ®Â±è</button>
          </div>
        </div>
      </div>
    </div>
  </div>

  <script>
  (function(){
    const frame = document.getElementById('frame');
    const slider = document.getElementById('slider');
    const slides = Array.from(slider.querySelectorAll('.slide'));
    const nextBtn = document.getElementById('next');
    const prevBtn = document.getElementById('prev');
    const dotsWrap = document.getElementById('dots');
    const captionEl = document.getElementById('caption');
    const playBtn = document.getElementById('playpause');
    const fullBtn = document.getElementById('fullscreen');

    // autoplay state
    let auto = false;
    const INTERVAL_MS = 2000;  // 2s
    let slideInterval = null;

    // idle-hide state
    const IDLE_DELAY = 3000;   // 3s after no movement while playing
    let idleTimer = null;

    // dots
    slides.forEach((_, i) => {
      const d = document.createElement('div');
      d.className = 'dot' + (i===0 ? ' active' : '');
      d.dataset.index = i;
      d.addEventListener('click', () => {
        goTo(i, false);
        userActivity();
      });
      dotsWrap.appendChild(d);
    });

    function currentIndex(){
      return slides.findIndex(s => s.classList.contains('current'));
    }

    function setCaption(i){
      captionEl.textContent = slides[i].querySelector('img').dataset.caption || '';
    }

    function setDot(i){
      dotsWrap.querySelectorAll('.dot').forEach((el, idx) => {
        el.classList.toggle('active', idx === i);
      });
    }

    function goTo(i, restart){
      const cur = slider.querySelector('.slide.current');
      if (cur) cur.classList.remove('current');
      slides[i].classList.add('current');
      setDot(i);
      setCaption(i);

      if (restart && auto){
        stopAuto();
        startAuto();
      }
    }

    function nextSlide(){
      goTo((currentIndex() + 1) % slides.length, false);
    }

    function prevSlide(){
      goTo((currentIndex() - 1 + slides.length) % slides.length, false);
    }

    // --- autoplay / idle hide ---
    function startIdleTimer(){
      clearTimeout(idleTimer);
      slider.classList.remove('idle'); // show UI right now
      idleTimer = setTimeout(() => {
        if (auto){
          slider.classList.add('idle'); // hide UI after delay
        }
      }, IDLE_DELAY);
    }

    function startAuto(){
      if (!slideInterval){
        slideInterval = setInterval(nextSlide, INTERVAL_MS);
      }
      slider.classList.add('playing');
      startIdleTimer();
    }

    function stopAuto(){
      clearInterval(slideInterval);
      slideInterval = null;
      slider.classList.remove('playing','idle');
      clearTimeout(idleTimer);
    }

    function toggleAuto(){
      auto = !auto;
      playBtn.textContent = auto ? '‚è∏Ô∏èÊöÇÂÅú' : '‚ñ∂Ô∏èÊí≠Êîæ (2s)';
      if (auto){
        startAuto();
      } else {
        stopAuto();
      }
    }

    function userActivity(){
      // reset idle timer ONLY if currently auto-playing
      if (auto){
        startIdleTimer();
      }
    }

    // --- controls ---
    playBtn.addEventListener('click', () => {
      toggleAuto();
      userActivity();
    });

    nextBtn.addEventListener('click', () => {
      nextSlide();
      if (auto){
        // keep autoplay smooth (reset interval timing)
        stopAuto();
        startAuto();
      }
      userActivity();
    });

    prevBtn.addEventListener('click', () => {
      prevSlide();
      if (auto){
        stopAuto();
        startAuto();
      }
      userActivity();
    });

    // if tab becomes hidden, pause autoplay
    document.addEventListener('visibilitychange', () => {
      if (document.hidden){
        stopAuto();
      } else if (auto){
        startAuto();
      }
    });

    // fullscreen behavior with Notion fallback
    fullBtn.addEventListener('click', () => {
      const el = frame;
      let fullscreenAttempted = false;

      try {
        if (el.requestFullscreen){
          el.requestFullscreen();
          fullscreenAttempted = true;
        } else if (el.webkitRequestFullscreen){
          el.webkitRequestFullscreen();
          fullscreenAttempted = true;
        } else if (el.msRequestFullscreen){
          el.msRequestFullscreen();
          fullscreenAttempted = true;
        }
      } catch (err){
        fullscreenAttempted = false;
      }

      // If we couldn't request fullscreen (common inside Notion),
      // open the widget URL in a new tab instead so the user
      // can view it full page.
      if (!fullscreenAttempted){
        const win = window.open(window.location.href, '_blank');
        if (!win){
          alert('Êó†Ê≥ïÂÖ®Â±èÔºåÊµèËßàÂô®/Notion ÈòªÊ≠¢‰∫ÜËøô‰∏ÄÊìç‰Ωú„ÄÇËØ∑ÂÖÅËÆ∏ÂºπÂá∫Á™óÂè£ÊàñÁõ¥Êé•Âú®Êñ∞Ê†áÁ≠æ‰∏≠ÊâìÂºÄÊ≠§È°µÈù¢„ÄÇ');
        }
      }

      userActivity();
    });

    // keyboard navigation
    window.addEventListener('keydown', e => {
      if (e.key === 'ArrowRight'){
        nextSlide();
        if (auto){ stopAuto(); startAuto(); }
        userActivity();
      } else if (e.key === 'ArrowLeft'){
        prevSlide();
        if (auto){ stopAuto(); startAuto(); }
        userActivity();
      } else if (e.code === 'Space'){
        e.preventDefault();
        toggleAuto();
        userActivity();
      } else {
        userActivity();
      }
    });

    // swipe navigation (mobile)
    let startX = null;
    slider.addEventListener('touchstart', e => {
      if (e.touches.length === 1){
        startX = e.touches[0].clientX;
      }
      userActivity();
    }, {passive: true});

    slider.addEventListener('touchend', e => {
      if (startX === null) return;
      const dx = e.changedTouches[0].clientX - startX;
      if (Math.abs(dx) > 40){
        if (dx < 0){
          nextSlide();
        } else {
          prevSlide();
        }
        if (auto){
          stopAuto();
          startAuto();
        }
      }
      startX = null;
      userActivity();
    });

    // mouse / wheel / touchmove also count as activity
    ['mousemove','mousedown','mouseup','wheel','touchmove']
      .forEach(ev => frame.addEventListener(ev, userActivity, {passive:true}));

    // init first slide
    goTo(0,false);
  })();
  </script>
</body>
</html>
